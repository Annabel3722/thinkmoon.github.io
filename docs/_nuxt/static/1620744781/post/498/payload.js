__NUXT_JSONP__("/post/498", (function(a,b){return {data:[{article:{cid:498,title:"为typecho增加Ctrl+S保存文章功能",slug:"498",created:1572248460,modified:1572248732,text:"\u003C!--markdown--\u003E## 前言\r\n\r\n本文使用jQuery修改typecho让其在文章编辑页内支持`CTRL + S`保存文章草稿，typecho的版本为1.2 (18.10.23).\r\n\r\n## 为什么需要？\r\n\r\n由于个人博客使用的typecho，在编辑文章的过程中经常习惯性的点击`CTRl + S`，然后就会非常不友好的提示了这个。\r\n\r\n![2019-10-28T06:59:58.png][1]\r\n\r\n这对追求优雅的本宅来说，简直无法容忍。难道我要因此弃用typecho?这也太夸张了。那就来发挥我modify的能力吧，毕竟闲余折腾是我的一大乐趣，而且自己动手，丰衣足食嘛！\r\n\r\n## 心路历程\r\n\r\n1. 首先，我知道这个理论上绝对可行，因为我用过很多此类功能。\r\n\r\n2. 经查阅资料，chrome的适配最好，当然我也没考虑别的浏览器，因为我眼中的浏览器只有两种，chrome和不是chrome。随便一提：不用chrome的程序员不是优雅的程序员。\r\n\r\n3. 分析实现方法，大致分为两步，监听`ctrl+s`时间和模拟点击保存草稿按钮\r\n\r\n4. 选型方面，由于typecho内置jquery，因此采用最快捷的办法\r\n\r\n## 实现过程\r\n\r\n### 确认页面是否支持jQuery\r\n\r\n为了避免重复引入，我们可在console中输入`$`，根据提示来确认是否已有jQuery\r\n\r\n![确认是否已有jQuery][2]\r\n\r\n如图，则表示已有jQuery。\r\n\r\n### 找到编辑文章的php页面\r\n\r\n嗯，就是这个路径`typecho\u002Fadmin\u002Fwrite-post.php`\r\n\r\n### 找个合适位置放script\r\n\r\n请在文件末尾插入一个script节点，以防止在jquery定义之前使用或者在`if`语句中未应用。\r\n\r\n### 监听`ctrl + S`\r\n\r\n在script节点中插入以下代码\r\n\r\n```\r\n$(window).keydown(function(event) {\r\n        if (event.ctrlKey && event.which == 83) {\r\n            alert(\"Ctrl+S pressed.\");\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    });\r\n```\r\n\r\n刷新编辑文章页，提示以下内容则监听成功。\r\n\r\n![好像暗黑背景有点看不清？][3]\r\n\r\n## 模拟点击保存\r\n\r\n通过源代码分析，我们可以发现，保存文章的按钮id为`btn-save`。现在我们修改代码里面的内容如下\r\n\r\n```\r\n$(window).keydown(function(event) {\r\n        if (event.ctrlKey && event.which == 83) {\r\n            $(\"#btn-save\").click();\r\n            return false;\r\n        } else {\r\n            return true;\r\n        }\r\n    });\r\n```\r\n\r\n## 大功告成\r\n\r\n![2019-10-28T07:33:26.png][4]\r\n\r\n## 结语\r\n\r\n本文从技术层面上来说没什么亮点，这是我在尝试一种新的写作方式的练手篇。在原先只记录如何做的基础上，增加了了心路历程这一项，侧重于记录我在实际过程中一个想法到把它实现出来的整个过程，目的在于分享如何思考，从哪里开始，怎么实现的整个思维过程。大家且当抛砖引玉看看吧！\r\n\r\n## 参考资料\r\n\r\n[JavaScript或jQuery模拟点击超链接和按钮][5]\r\n[javascript屏蔽Ctrl+s，F1，F3各浏览器兼容写法][6]\r\n\r\n\r\n  [1]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2019-10-28T06:59:58.png\r\n  [2]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2019-10-28T07:14:31.png\r\n  [3]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2019-10-28T07:29:12.png\r\n  [4]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2019-10-28T07:33:26.png\r\n  [5]: https:\u002F\u002Fwww.cnblogs.com\u002Ffreeweb\u002Fp\u002F4797872.html\r\n  [6]: https:\u002F\u002Fblog.csdn.net\u002Fmilaner337\u002Farticle\u002Fdetails\u002F49835555",order:b,authorId:1,type:"post",status:"publish",commentsNum:15,allowComment:a,allowPing:a,allowFeed:a,parent:b,views:1068,likes:3}}],fetch:{},mutations:void 0}}("1",0)));