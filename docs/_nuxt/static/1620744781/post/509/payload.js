__NUXT_JSONP__("/post/509", (function(a,b){return {data:[{article:{cid:509,title:"进化版的Server酱——PushBear",slug:"509",created:1517548500,modified:1572254167,text:"\u003C!--markdown--\u003E一个利用PHP群发微信消息的工具。上一篇讲到了如何用Server酱推送消息到个人微信，这篇我们一起来了解一下Server酱的进化版——pushbear，一对多微信消息推送\r\n\u003C!-- more --\u003E\r\n### Server酱的局限\r\n- ==首先这里的SCKEY与userID只是简单的一对一的关系，但其实如果做成一对多更好。因为这样便可以群发通知 #801400==\r\n- ==她这儿的的分享链接里面包含了很多个人敏感的信息，而其实这在微信的标准里面是不安全的。 #801900==\r\n\r\n### 老规矩，PushBear官网([https:\u002F\u002Fpushbear.ftqq.com\u002Fadmin\u002F#\u002F][1])\r\n\r\n![PushBear][2]\r\n\r\n### 使用流程\r\n\r\n1.使用微信扫码登录网站\r\n\r\n![扫码登录][3]\r\n\r\n\u003E 这个比Server好的地方就是它不需要使用github账号登录了，直接扫码即可。\r\n\r\n2.新建通道\r\n\r\n![新建通道][4]\r\n\r\n\u003E 这里的通道的意思你可以把它，看作一个群。每一个通道负责群发消息到绑定这个管道 的微信。\r\n\r\n3.绑定用户到通道\r\n\r\n![绑定用户][5]\r\n\r\n\u003E 这个也特别的方便，直接扫描订阅二维码即可\r\n\r\n4.发送测试消息\r\n\r\n![发送测试消息][6]\r\n\r\n\u003E 打开测试表单啦，然后测试\r\n\r\n![测试表单][7]\r\n\r\n5.使用PHP群发消息到微信\r\n\r\n一个函数就可以了，\r\n\r\n\r\n\r\n``` php5\r\nfunction weixin_notify($header,$content){\r\n    $SENDKEY = \"1218-f6*************0b98d0a2e10fdd2\";\u002F\u002F微信通知KEY\r\n    file_get_contents('https:\u002F\u002Fpushbear.ftqq.com\u002Fsub?sendkey='.$SENDKEY.'&text='.urlencode($header).'&desp='.urlencode($content));\r\n}\r\n```\r\n6.效果展示\r\n\r\n![预览消息][8]\r\n\r\n![消息内容][9]\r\n\r\n### 总结\r\n\u003E 原理什么的，这次就不解释了，上一篇已经解释过了。\r\n\r\n现在我们已经可以利用Server酱发送服务器报警消息至开发者微信。\r\n然后再利用PushBear群发业务消息到用户微信。完美对接业务以及管理逻辑。\r\n是不感觉特别的方便？\r\n\r\n\r\n  [1]: https:\u002F\u002Fpushbear.ftqq.com\u002Fadmin\u002F#\u002F\r\n  [2]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002F%E5%B0%8F%E4%B9%A6%E5%8C%A0\u002F1509353273542.jpg\r\n  [3]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002F%E5%B0%8F%E4%B9%A6%E5%8C%A0\u002F1509353583536.jpg\r\n  [4]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002F%E5%B0%8F%E4%B9%A6%E5%8C%A0\u002F1509353779939.jpg\r\n  [5]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002F%E5%B0%8F%E4%B9%A6%E5%8C%A0\u002F1509353872869.jpg\r\n  [6]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002F%E5%B0%8F%E4%B9%A6%E5%8C%A0\u002F1509353979228.jpg\r\n  [7]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002F%E5%B0%8F%E4%B9%A6%E5%8C%A0\u002F1509354217642.jpg\r\n  [8]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002F%E5%B0%8F%E4%B9%A6%E5%8C%A0\u002F1509354665128.jpg\r\n  [9]: https:\u002F\u002Fblog.cdn.thinkmoon.cn\u002F%E5%B0%8F%E4%B9%A6%E5%8C%A0\u002F1509354685511.jpg\r\n",order:a,authorId:1,type:"post",status:"publish",commentsNum:a,allowComment:b,allowPing:b,allowFeed:b,parent:a,views:588,likes:a}}],fetch:{},mutations:void 0}}(0,"1")));