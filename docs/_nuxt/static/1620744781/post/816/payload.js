__NUXT_JSONP__("/post/816", (function(a,b){return {data:[{article:{cid:816,title:"让你的网站防广告屏蔽",slug:"816",created:1586856480,modified:1586865738,text:"\u003C!--markdown--\u003E## 前言\r\n相信小伙伴们对广告是又爱又恨，一方面不想接受广告的荼毒，另一方面也想接点广告赚点流量收益。由此而来衍生出了两个技术，屏蔽广告与防屏蔽广告。\r\n\r\n![2020-04-14T09:05:00.png][1]\r\n屏蔽广告\r\n\r\n![2020-04-14T09:07:07.png][2]\r\n防屏蔽\r\n\r\n## 原理\r\n\r\n我们要想做到网站广告不被人屏蔽，首先就要理解屏蔽广告的原理。\r\n\r\n### 1.初阶屏蔽\r\n\r\n含ad，推广等字样的js或者class类就直接拦截或者不显示\r\n\r\n### 2.高阶屏蔽\r\n\r\n\u003E 我也不会，但是高阶屏蔽肯定是可以屏蔽低阶广告的。\r\n\r\n那么根据这个原理，我们可以发现。只要我们写一个很low很low的广告，然后监听它是否成功加载，如果没有，则跳转页面或者不显示内容。\r\n\r\n## 实现\r\n\r\n### 1. 制造广告\r\n\r\n先写一个一眼就能看出来是广告的js文件，例如把js文件名命名\r\n为\"adview_pic_cpc_cpm_cpa_guanggao_gg_ads_300x250.js\"。广告二字赤裸裸的写着，广告的韵味呼之欲出。\r\n\r\n### 2. 定义变量\r\n\r\n在js里面定义一个变量，比如：\r\n```javascript\r\nvar adskilltest=true;\r\n```\r\n\r\n### 3. 监听广告变量\r\n\r\n页面文件中读取该变量\r\n\r\n\u003E 不管怎么样，只要被拦截，那就肯定是undefined。让个极其肤浅的广告命名，来检测是否有屏蔽广告，这叫引蛇出洞！\r\n\r\n![2020-04-14T09:20:46.png][3]\r\n\r\n大功告成！\r\n\r\n### 4. 后续操作\r\n\r\n既然被拦截，就要做出点反应。有了反应之后呢，还需要保存当时浏览的页面连接。我的解决方法是写一个`noads.html`负责显示被拦截后的内容以及保存跳转前的链接。\r\n\r\n```html\r\n\u003C!DOCTYPE html\u003E\r\n\u003Chtml\u003E\r\n\u003Chead\u003E\r\n\u003Cmeta charset=\"UTF-8\"\u003E\r\n\u003Ctitle\u003E温馨提示\u003C\u002Ftitle\u003E\r\n\u003C\u002Fhead\u003E\r\n\u003Cbody\u003E\r\n\u003Cp\u003E网站内容被识别为广告，已被屏蔽。请禁用广告屏蔽后点击下面链接哦！\u003C\u002Fp\u003E\r\n\u003Ca href=\"#\" id=\"a\"\u003E我已关闭广告屏蔽功能\u003C\u002Fa\u003E\r\n\u003C\u002Fbody\u003E\r\n\u003Cscript\u003E\r\n\tfunction getQueryVariable(variable)\r\n{\r\n       var query = window.location.search.substring(1);\r\n       var vars = query.split(\"&\");\r\n       for (var i=0;i\u003Cvars.length;i++) {\r\n               var pair = vars[i].split(\"=\");\r\n               if(pair[0] == variable){return pair[1];}\r\n       }\r\n       return(false);\r\n}\r\ndocument.getElementById(\"a\").href = getQueryVariable('route');\r\n\u003C\u002Fscript\u003E\r\n\u003C\u002Fhtml\u003E\r\n\r\n```\r\n\r\n\u003E tips: 该方法不是最优，但是可行！\r\n\r\n  [1]: http:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2020-04-14T09:05:00.png\r\n  [2]: http:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2020-04-14T09:07:07.png\r\n  [3]: http:\u002F\u002Fblog.cdn.thinkmoon.cn\u002Fblog\u002Ftypecho\u002F2020-04-14T09:20:46.png",order:b,authorId:1,type:"post",status:"publish",commentsNum:2,allowComment:a,allowPing:a,allowFeed:a,parent:b,views:858,likes:4}}],fetch:{},mutations:void 0}}("1",0)));